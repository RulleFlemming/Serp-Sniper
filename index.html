<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SERP Sniper - SEO Optimeringsspil</title>
  <script defer src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0"></script>
  <style>
    /* White background, with rolling blurred colored balls. */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      overflow: hidden; /* so balls won't create scrollbars */
      background: #ffffff; /* pure white background */
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
    }
    /* Container for all rolling balls, behind main content */
    .rolling-balls {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    .ball {
      position: absolute;
      border-radius: 50%;
      filter: blur(10px);
      opacity: 0.7;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
    }
    .game-container {
      position: relative;
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      max-width: 800px;
      width: 90%;
      height: 600px; /* Fixed: added "px" */
      z-index: 1;
      overflow: hidden;
    }
    .start-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      z-index: 999;
    }
    .start-screen h2 {
      margin-bottom: 1rem;
      font-size: 2rem;
    }
    .start-screen p {
      max-width: 500px;
      margin: 0 20px 1rem;
      line-height: 1.5;
    }
    .start-screen button {
      background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
      color: #fff;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
      margin-bottom: 20px; /* Fixed: removed the space before 'px' */
    }
    .start-screen button:hover {
      transform: scale(1.05);
    }
    .progress-bar {
      width: 100%;
      height: 26px;
      background: #e9ecef;
      border-radius: 13px;
      overflow: hidden;
      margin-bottom: 15px;
      position: relative;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    }
    .progress-fill {
      background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
      height: 100%;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      transition: width 0.4s ease;
    }
    h1 {
      margin-top: 10px;
      animation: fadeInDown 0.5s ease;
      font-weight: 700;
      letter-spacing: 1px;
    }
    @keyframes fadeInDown {
      0% { transform: translateY(-20px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }
    .options-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: auto auto auto auto;
      gap: 10px;
      margin-top: 20px;
      text-align: center;
      animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    .grid-heading {
      background: #fcfcfc;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-weight: bold;
      padding: 12px;
      animation: fadeIn 0.5s ease;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    .option {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f0f0f0;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.95rem;
      margin: 5px;
      transition: transform 0.2s ease, background 0.2s ease;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }
    .option:hover {
      transform: translateY(-2px);
      background: #e0e0e0;
    }
    .correctOption {
      background: #28a745 !important;
      color: #fff !important;
      font-weight: bold;
    }
    .selected {
      background: #007bff !important;
      color: #fff !important;
    }
    .shake {
      animation: shake 0.5s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-5px); }
      40% { transform: translateX(5px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    #checkRankBtn {
      background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
      color: #fff;
      border: none;
      padding: 12px 28px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
      animation: fadeInUp 0.5s ease;
      font-weight: 600;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    @keyframes fadeInUp {
      0% { transform: translateY(20px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }
    #checkRankBtn:hover {
      transform: translateY(-2px);
      background: linear-gradient(90deg, #2b4ca3 0%, #0c1038 100%);
    }
    #result {
      margin-top: 10px;
      min-height: 30px;
      font-weight: 600;
    }
    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeInOverlay 0.5s ease;
    }
    @keyframes fadeInOverlay {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    .overlay-content {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 300px;
      animation: popIn 0.5s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    @keyframes popIn {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    .overlay-content h2 {
      margin: 0 0 10px 0;
    }
    .overlay-content button {
      background: #28a745;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: 600;
      transition: background 0.2s ease;
    }
    .overlay-content button:hover {
      background: #218838;
    }
  </style>
</head>
<body>
  <div class="rolling-balls" id="rollingBallsContainer"></div>
  <div class="game-container">
    <div class="start-screen" id="startScreen">
      <h2>Velkommen til SERP Sniper! 5</h2>
      <p>Dette spil hj√¶lper dig med at optimere din side.</p>
      <p>
        Husk p√• at der ikke er et decideret korrekt svar i SEO, men der er best practices.
      </p>
      <br>
      <p>
        V√¶lg den mest oplagte Meta titel, meta beskrivelse og H1 overskrift og gennemf√∏r spillet.
      </p>
      <br>
      <p>
        Klik "Start spillet" for at starte!
      </p>
      <button id="startButton">Start spillet</button>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 0%;">Level 1 af 10</div>
    </div>
    <h1>SERP Sniper: Optimer for at n√• #1</h1>
    <p id="businessCase"></p>
    <div class="options-grid" id="optionsGrid">
      <div class="grid-heading">Meta Titel</div>
      <div class="grid-heading">Meta Beskrivelse</div>
      <div class="grid-heading">H1 Overskrift</div>
    </div>
    <button id="checkRankBtn">Tjek min placering</button>
    <p id="result"></p>
    <div class="overlay" id="levelCompleteOverlay">
      <div class="overlay-content">
        <h2>Level Complete!</h2>
        <p id="overlayMsg">Godt klaret!</p>
        <button id="nextLevelBtn">N√¶ste Level</button>
      </div>
    </div>
  </div>
  <script>
    let streak = 0;
    let level = 1; // Initialize level to start at 1
    let levelCompleted = false; // Flag to block multiple clicks once level is complete

    // Define business cases for each level.
    const businessCases = {
      1: "Du ejer en caf√© i Aarhus og √∏nsker at tiltr√¶kke flere lokale kunder.",
      2: "Du driver en webshop med b√¶redygtige sko og vil √∏ge din online synlighed.",
      3: "Du har et fitnesscenter i Odense og √∏nsker at f√• flere medlemmer.",
      4: "Test i sp√∏rgsm√•l.",
      5: "Du ejer en boghandel i K√∏benhavn og vil √∏ge salget af nicheb√∏ger.",
      6: "Du administrerer en restaurant i Aalborg og √∏nsker at tiltr√¶kke flere g√¶ster.",
      7: "Du driver en blomsterbutik i Esbjerg og vil forbedre din lokale SEO.",
      8: "Du har en t√∏jbutik i Randers og vil skille dig ud online.",
      9: "Du ejer en tandl√¶geklinik i Vejle og √∏nsker at √∏ge patienttilstr√∏mningen.",
      10: "Du administrerer et rejsebureau i Roskilde og vil √∏ge din digitale tilstedev√¶relse."
    };

    // Define answer options for each level.
    const answerOptions = {
      1: {
        title: ["Hyggelig caf√© i Aarhus", "Byens bedste kaffe", "Lav en kop kaffe hjemme"],
        meta:  ["Nyd en kop friskbrygget kaffe i hjertet af Aarhus", "M√∏d vennerne til en hyggelig brunch", "Kaffe hurtigt og billigt"],
        h1:    ["Velkommen til Caf√© Aarhus", "Pr√∏v vores specialkaffe", "Kaffe til lavpris"]
      },
      2: {
        title: ["B√¶redygtige sko til enhver lejlighed", "Komfort og stil i √©t", "Billige sko p√• tilbud"],
        meta:  ["Find moderne og milj√∏venlige sko til hele familien", "V√¶lg kvalitet og komfort med b√¶redygtige materialer", "K√∏b sko til halv pris i dag"],
        h1:    ["Vores udvalg af b√¶redygtige sko", "Stil og komfort for alle", "Spar penge p√• fodt√∏j"]
      },
      3: {
        title: ["Bliv medlem af Odenses bedste fitnesscenter", "Tr√¶n med professionelle tr√¶nere", "Gratis tr√¶ning for nye medlemmer"],
        meta:  ["Kom i form med vores personlige tr√¶nere og moderne faciliteter", "Tr√¶n p√• dine vilk√•r med fleksible medlemskaber", "F√• adgang til fitness for kun 99 kr./mdr."],
        h1:    ["Velkommen til Fitness Odense", "Dit sundhedscenter i hjertet af byen", "Tilmeld dig i dag og kom i gang"]
      },
      4: {
        title: ["Title test svar 1", "Title test svar 2", "Title test svar 3"],
        meta:  ["Meta test svar 1", "Meta test svar 2", "Meta test svar 3"],
        h1:    ["H1 test svar 1", "H1 test svar 2", "H1 test svar 3"]
      },
      5: {
        title: ["Moderne boghandel i K√∏benhavn", "Kultur og b√∏ger i √©t", "Find din n√¶ste favoritbog"],
        meta:  ["Oplev et unikt udvalg af nicheb√∏ger", "B√∏ger for enhver smag og interesse", "Specialiseret udvalg af moderne litteratur"],
        h1:    ["Velkommen til Boghandel K√∏benhavn", "Din bogoplevelse venter", "Find din n√¶ste l√¶seoplevelse"]
      },
      6: {
        title: ["Restaurant i Aalborg med gourmetoplevelser", "Smagfuld mad i hjertet af Aalborg", "Traditionel mad med et twist"],
        meta:  ["Oplev √¶gte gourmetmad med s√¶sonens r√•varer", "Nyd en unik kulinarisk rejse i Aalborg", "Madoplevelser ud over det s√¶dvanlige"],
        h1:    ["Velkommen til Restaurant Aalborg", "Oplev √¶gte smagsoplevelser", "Gourmetmad i s√¶rklasse"]
      },
      7: {
        title: ["Blomsterbutik i Esbjerg med farverige buketter", "Friske blomster til alle anledninger", "Kreative blomsterarrangementer"],
        meta:  ["Find de smukkeste blomster og buketter", "Blomster designet med k√¶rlighed og omhu", "F√• blomsterlevering direkte til d√∏ren"],
        h1:    ["Velkommen til Blomsterbutik Esbjerg", "Blomster der bringer gl√¶de", "Skab et farverigt milj√∏"]
      },
      8: {
        title: ["Moderne t√∏jbutik i Randers med stil", "Find din personlige stil hos os", "Unikke modeudtryk for alle"],
        meta:  ["Oplev de nyeste trends og tidl√∏se klassikere", "Mode der inspirerer og imponerer", "G√• ikke glip af vores s√¶rlige kollektioner"],
        h1:    ["Velkommen til T√∏jbutik Randers", "Din stil, din mode", "Find din unikke stil"]
      },
      9: {
        title: ["Tandl√¶geklinik i Vejle med fokus p√• tryghed", "F√• den bedste tandpleje i byen", "Moderne tandpleje med omsorg"],
        meta:  ["Din sundhed og smil er vores prioritet", "Ekspert tandpleje til hele familien", "Tryg og moderne tandpleje"],
        h1:    ["Velkommen til Tandl√¶geklinik Vejle", "Smil med selvtillid", "Tandpleje i topklasse"]
      },
      10: {
        title: ["Rejsebureau i Roskilde med dr√∏mmeferier", "Oplev verden med vores unikke rejsepakker", "Skr√¶ddersyede rejseoplevelser til dig"],
        meta:  ["Find din n√¶ste eventyrrejse med os", "Eksklusive rejsepakker og tilbud", "Rejseoplevelser der skaber minder for livet"],
        h1:    ["Velkommen til Rejsebureau Roskilde", "Planl√¶g din dr√∏mmerejse", "Opdag verden med os"]
      }
    };

    // Define the correct answers for each level.
    const correctAnswers = {
      1:  { title: 0, meta: 0, h1: 0 },
      2:  { title: 0, meta: 0, h1: 0 },
      3:  { title: 0, meta: 0, h1: 0 },
      4:  { title: 0, meta: 0, h1: 0 },
      5:  { title: 0, meta: 0, h1: 0 },
      6:  { title: 0, meta: 0, h1: 0 },
      7:  { title: 0, meta: 0, h1: 0 },
      8:  { title: 0, meta: 0, h1: 0 },
      9:  { title: 0, meta: 0, h1: 0 },
      10: { title: 0, meta: 0, h1: 0 }
    };

    // Update maxLevel to match the total number of levels.
    const maxLevel = 10;

    document.addEventListener('DOMContentLoaded', () => {
      initGame();
      spawnRollingBalls();
      document.getElementById('startButton').onclick = startGame;
      document.getElementById('checkRankBtn').onclick = calculateRank;
      document.getElementById('nextLevelBtn').onclick = nextLevel;
    });

    function initGame(){
      document.getElementById('startScreen').style.display = 'flex';
    }

    function startGame(){
      document.getElementById('startScreen').style.display = 'none';
      loadLevel();
    }

    function loadLevel(){
      levelCompleted = false; // Reset flag for new level
      updateProgressBar(level, maxLevel);
      document.getElementById('businessCase').innerText = businessCases[level];

      const grid = document.getElementById('optionsGrid');
      if (!grid) return;

      // Remove old rows beyond headings
      while (grid.children.length > 3) {
        grid.removeChild(grid.lastChild);
      }

      for (let i = 0; i < 3; i++){
        const titleCell = createOptionCell('title', i);
        const metaCell  = createOptionCell('meta', i);
        const h1Cell    = createOptionCell('h1', i);

        grid.appendChild(titleCell);
        grid.appendChild(metaCell);
        grid.appendChild(h1Cell);
      }
    }

    function createOptionCell(category, index){
      const cell = document.createElement('div');
      cell.classList.add('option');

      const text = answerOptions[level][category][index];
      cell.innerText = text;

      if (correctAnswers[level][category] === index) {
        cell.classList.add('correctOption');
      }

      cell.dataset.category = category;
      cell.dataset.index = index;

      cell.onclick = () => {
        removeSelected(category);
        cell.classList.add('selected');
      };

      return cell;
    }

    function removeSelected(category){
      const all = document.querySelectorAll(`.option[data-category='${category}']`);
      all.forEach(o => o.classList.remove('selected'));
    }

    function calculateRank(){
      if (levelCompleted) return; // Ignore further clicks if level is already completed

      const titleSel = document.querySelector(".option[data-category='title'].selected");
      const metaSel  = document.querySelector(".option[data-category='meta'].selected");
      const h1Sel    = document.querySelector(".option[data-category='h1'].selected");

      if (!titleSel || !metaSel || !h1Sel){
        showMessage('V√¶lg en mulighed i alle kategorier!', true);
        return;
      }

      const titleIndex = +titleSel.dataset.index;
      const metaIndex  = +metaSel.dataset.index;
      const h1Index    = +h1Sel.dataset.index;

      const isCorrect = (
        titleIndex === correctAnswers[level].title &&
        metaIndex === correctAnswers[level].meta &&
        h1Index === correctAnswers[level].h1
      );

      if (isCorrect) {
        streak++;
        if (streak >= 2) {
          showMessage(`Godt klaret! Du har nu en streak p√• ${streak} korrekte i tr√¶k!`, false);
        } else {
          showMessage('Godt klaret! Du valgte de mest optimale svar.', false);
        }
        setTimeout(() => {
          triggerConfetti();
          showLevelComplete();
        }, 500);
      } else {
        streak = 0;
        document.querySelector('.game-container').classList.add('shake');
        setTimeout(() => {
          document.querySelector('.game-container').classList.remove('shake');
        }, 500);
        showMessage('Ikke helt korrekt ‚Äì pr√∏v at justere dine valg.', true);
      }
    }

    function showMessage(msg, isError){
      const r = document.getElementById('result');
      r.innerText = msg;
      r.style.color = isError ? 'red' : 'green';
    }

    function showLevelComplete(){
      levelCompleted = true; // Mark level as complete to block further clicks
      const facts = [
        "Vidste du, at lange s√∏geord (long-tail) ofte har mindre konkurrence og h√∏jere konverteringsrate?",
        "Hastighed er afg√∏rende! Google prioriterer hurtige hjemmesider i s√∏geresultaterne.",
        "Strukturerede data kan hj√¶lpe s√∏gemaskiner med at forst√• dit indhold bedre.",
        "Unikke meta titler og beskrivelser kan forbedre klikraten i SERP'en.",
        "Mobilvenlighed er et must ‚Äì Google bruger mobile-first indeksering nu.",
        "Brugeroplevelse (UX) er lig med SEO ‚Äì jo bedre UX, jo bedre placering typisk.",
        "Kvalitetsindhold er kongen. Gode tekster vinder n√¶sten altid over SEO-tricks.",
        "Backlinks fra trov√¶rdige sider er fortsat en vigtig SEO-faktor.",
        "Optimer dine billeder med beskrivende ALT-tekster for bedre billeds√∏gning.",
        "HTTPS og et sikkerhedscertifikat √∏ger trov√¶rdigheden og rangering."
      ];
      const i = Math.floor(Math.random() * facts.length);
      document.getElementById('overlayMsg').textContent = 'Godt klaret! ' + facts[i];
      document.getElementById('levelCompleteOverlay').style.display = 'flex';
    }

    function hideLevelComplete(){
      document.getElementById('levelCompleteOverlay').style.display = 'none';
    }

    function nextLevel(){
      hideLevelComplete();
      if (level < maxLevel) {
        level++;
        document.getElementById('result').innerText = '';
        loadLevel();
      } else {
        document.getElementById('result').style.color = 'green';
        document.getElementById('result').innerText = 'üéâ Du har gennemf√∏rt alle levels! üéâ';
      }
    }

    function triggerConfetti(){
      if (typeof confetti === 'function') {
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6 }
        });
      }
    }

    function updateProgressBar(cur, t){
      const fill = document.getElementById('progressFill');
      if (!fill) return;
      const f = Math.round((cur / t) * 100);
      fill.style.width = f + '%';
      fill.innerText = `Level ${cur} af ${t}`;
    }

    function spawnRollingBalls(){
      const container = document.getElementById('rollingBallsContainer');
      if (!container) return;

      const numBalls = 12;
      for (let i = 0; i < numBalls; i++){
        const ball = document.createElement('div');
        ball.classList.add('ball');

        const hue = Math.floor(Math.random() * 360);
        const saturation = Math.floor(Math.random() * 40 + 60);
        const lightness = Math.floor(Math.random() * 40 + 40);
        ball.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;

        const size = Math.random() * 100 + 50;
        ball.style.width = size + 'px';
        ball.style.height = size + 'px';

        const startX = Math.random() * 100 - 50;
        const startY = Math.random() * 100 - 50;
        ball.style.top = `${startY}vh`;
        ball.style.left = `${startX}vw`;

        const driftName = `ballDrift${i}`;
        const endX = Math.random() * 100 - 50;
        const endY = Math.random() * 100 - 50;
        const duration = Math.random() * 20 + 10;

        const styleSheet = document.styleSheets[0];
        styleSheet.insertRule(`@keyframes ${driftName} {
          0%   { transform: translate(0,0); }
          100% { transform: translate(${endX}vw, ${endY}vh); }
        }`, styleSheet.cssRules.length);

        ball.style.animation = `${driftName} ${duration}s ease-in-out infinite alternate`;

        container.appendChild(ball);
      }
    }
  </script>
</body>
</html>
