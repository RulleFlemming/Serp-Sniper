<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SERP Sniper - SEO Optimeringsspil</title>
    <script defer src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        .game-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: auto;
            position: relative;
        }
        .level-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .options-container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 10px;
            margin-top: 20px;
        }
        .options {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .option {
            background: #ddd;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        .correctOption {
            background: #28a745 !important; /* green */
            color: #fff !important;
            font-weight: bold;
        }
        .option.selected {
            background: #007bff;
            color: #fff;
        }
        button {
            background: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="level-indicator">Level <span id="level">1</span> af 3</div>
        <h1>SERP Sniper: Optimer for at n√• #1</h1>
        <p id="businessCase"></p>

        <div class="options-container">
            <div class="options" id="titleOptions">
                <h3 id="caseTitle"></h3>
                <h2>Meta Titel</h2>
            </div>
            <div class="options" id="metaOptions">
                <h2>Meta Beskrivelse</h2>
            </div>
            <div class="options" id="h1Options">
                <h2>H1 Overskrift</h2>
            </div>
        </div>

        <button id="checkRankBtn">Tjek min placering</button>
        <p id="result"></p>
    </div>

    <script>
        // data objects
        const businessCases = {
            1: "Du ejer en caf√© i Aarhus og √∏nsker at tiltr√¶kke flere lokale kunder.",
            2: "Du driver en webshop med b√¶redygtige sko og vil √∏ge din online synlighed.",
            3: "Du har et fitnesscenter i Odense og √∏nsker at f√• flere medlemmer."
        };

        const answerOptions = {
            1: {
                title: ["Hyggelig caf√© i Aarhus", "Byens bedste kaffe", "Lav en kop kaffe hjemme"],
                meta: ["Nyd en kop friskbrygget kaffe i hjertet af Aarhus", "M√∏d vennerne til en hyggelig brunch", "Kaffe hurtigt og billigt"],
                h1: ["Velkommen til Caf√© Aarhus", "Pr√∏v vores specialkaffe", "Kaffe til lavpris"]
            },
            2: {
                title: ["B√¶redygtige sko til enhver lejlighed", "Komfort og stil i √©t", "Billige sko p√• tilbud"],
                meta: ["Find moderne og milj√∏venlige sko til hele familien", "V√¶lg kvalitet og komfort med b√¶redygtige materialer", "K√∏b sko til halv pris i dag"],
                h1: ["Vores udvalg af b√¶redygtige sko", "Stil og komfort for alle", "Spar penge p√• fodt√∏j"]
            },
            3: {
                title: ["Bliv medlem af Odenses bedste fitnesscenter", "Tr√¶n med professionelle tr√¶nere", "Gratis tr√¶ning for nye medlemmer"],
                meta: ["Kom i form med vores personlige tr√¶nere og moderne faciliteter", "Tr√¶n p√• dine vilk√•r med fleksible medlemskaber", "F√• adgang til fitness for kun 99 kr./mdr."],
                h1: ["Velkommen til Fitness Odense", "Dit sundhedscenter i hjertet af byen", "Tilmeld dig i dag og kom i gang"]
            }
        };

        // define correct answers for each level (0-based index)
        // if user picks that index in each category => pass level
        const correctAnswers = {
            1: { title: 0, meta: 0, h1: 0 },
            2: { title: 0, meta: 0, h1: 0 },
            3: { title: 0, meta: 0, h1: 0 }
        };

        let level = 1;
        const maxLevel = 3;

        function renderOptions(elementId, options) {
            const container = document.getElementById(elementId);
            if (!container) return;

            const heading = container.querySelector("h2").outerHTML;
            container.innerHTML = heading;

            // figure out which category we are dealing with
            const category = (elementId === "titleOptions") ? "title" : (elementId === "metaOptions") ? "meta" : "h1";
            // get the correct index for the current level
            const correctIndex = correctAnswers[level][category];

            options.forEach((option, index) => {
                const div = document.createElement("div");
                div.classList.add("option");
                div.innerText = option;

                // if this is the correct answer => highlight green
                if (index === correctIndex) {
                    div.classList.add("correctOption");
                }

                // store the index in data-index for easy retrieval
                div.dataset.index = index;

                // handle selection
                div.onclick = function() {
                    container.querySelectorAll(".option").forEach(opt => opt.classList.remove("selected"));
                    div.classList.add("selected");
                };

                container.appendChild(div);
            });
        }

        function loadLevel() {
            const lvlDisplay = document.getElementById("level");
            const caseDisplay = document.getElementById("businessCase");
            if (!lvlDisplay || !caseDisplay) return;

            lvlDisplay.innerText = level;
            caseDisplay.innerText = businessCases[level];

            if (answerOptions[level]) {
                renderOptions("titleOptions", answerOptions[level].title);
                renderOptions("metaOptions", answerOptions[level].meta);
                renderOptions("h1Options", answerOptions[level].h1);
            }
        }

        function calculateRank() {
            // check if user selected the correct index in each category
            const titleSelected  = document.querySelector('#titleOptions .selected');
            const metaSelected   = document.querySelector('#metaOptions .selected');
            const h1Selected     = document.querySelector('#h1Options .selected');

            if(!titleSelected || !metaSelected || !h1Selected) {
                document.getElementById('result').innerText = 'V√¶lg en mulighed i alle kategorier!';
                return;
            }

            const titleIndex = parseInt(titleSelected.dataset.index);
            const metaIndex  = parseInt(metaSelected.dataset.index);
            const h1Index    = parseInt(h1Selected.dataset.index);

            const isCorrect = (
                titleIndex === correctAnswers[level].title &&
                metaIndex  === correctAnswers[level].meta  &&
                h1Index    === correctAnswers[level].h1
            );

            if(isCorrect) {
                document.getElementById('result').innerText = '#1 - Du dominerer s√∏geresultaterne! üéØ';
                triggerConfetti();
                setTimeout(nextLevel, 2000);
            } else {
                document.getElementById('result').innerText = '#10 - Du skal optimere bedre! üîç';
            }
        }

        function nextLevel() {
            if (level < maxLevel) {
                level++;
                const resultEl = document.getElementById('result');
                if (resultEl) {
                    resultEl.innerText = '';
                }
                loadLevel();
            } else {
                const resultEl = document.getElementById('result');
                if (resultEl) {
                    resultEl.innerText = 'üéâ Du har gennemf√∏rt alle levels! üéâ';
                }
            }
        }

        function triggerConfetti() {
            if (typeof confetti === 'function') {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadLevel();
            const checkRankBtn = document.getElementById('checkRankBtn');
            if (checkRankBtn) {
                checkRankBtn.addEventListener('click', calculateRank);
            }
        });
    </script>
</body>
</html>
